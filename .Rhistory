df <- sp::SpatialPointsDataFrame(
cbind(
(runif(20) - .5) * 10 - 90.620130,  # lng
(runif(20) - .5) * 3.8 + 25.638077  # lat
),
data.frame(Country = factor(
ifelse(runif(20) > 0.75, "US", "Mexico"),
c("US", "Mexico")
))
)
pal <- colorFactor(c("navy", "darkgreen"), domain = c("US", "Mexico"))
library(leaflet)
pal <- colorFactor(c("navy", "darkgreen"), domain = c("US", "Mexico"))
leaflet(df) %>% addTiles() %>%
addCircleMarkers(
radius = ~ifelse(Country == "ship", 6, 10),
color = ~pal(Country),
stroke = TRUE, fillOpacity = 0.5
) %>%
addLegend(pal=pal, values = Country)
df <- sp::SpatialPointsDataFrame(
cbind(
(runif(20) - .5) * 10 - 90.620130,  # lng
(runif(20) - .5) * 3.8 + 25.638077  # lat
),
data.frame(Country = factor(
ifelse(runif(20) > 0.75, "US", "Mexico"),
c("US", "Mexico")
))
)
leaflet(df) %>% addTiles() %>%
addCircleMarkers(
radius = ~ifelse(Country == "ship", 6, 10),
color = ~pal(Country),
stroke = TRUE, fillOpacity = 0.5
) %>%
addLegend(pal=pal, values = Country)
(
leaflet(df) %>% addTiles() %>%
addCircleMarkers(
radius = ~ifelse(Country == "ship", 6, 10),
color = ~pal(Country),
stroke = TRUE, fillOpacity = 0.5
) %>%
addLegend(pal=pal, values = ~Country)
leaflet(df) %>% addTiles() %>%
addCircleMarkers(
radius = ~ifelse(Country == "ship", 6, 10),
color = ~pal(Country),
stroke = TRUE, fillOpacity = 0.5
) %>%
addLegend(pal=pal, values = ~Country)
leaflet(df) %>% addTiles() %>%
addCircleMarkers(
radius = ~ifelse(Country == "ship", 6, 10),
color = ~pal(Country),
stroke = TRUE, fillOpacity = 0.5
) %>%
addLegend(pal=pal, values = ~Country)
knit_with_parameters('~/Documents/Github/studyGroup/lessons/Intro_Map/Read_Me.Rmd')
# for ogrInfo() and readOGR()
#install.packages('rgdal')
library("rgdal")
# for file_path_sans_ext()
#install.packages('tools')
library("tools")
# for inner_join(), summarise() and the pipe operator (%>%)
#install.packages('dplyr')
library("dplyr")
# for fortify() and plotting
#install.packages('ggplot2')
library("ggplot2")
# for point.in.polygon() and spDists()
#install.packages('sp')
library("sp")
# Coastal lines ####
#path.ne.coast: Specify the path for the data. If you forked form GitHub and followed the download rules you don't need to change the path or the file_name
path.ne.coast <- ("Data/ne_10m_coastline")
file_name <- "ne_10m_coastline.shp"
# Loading the shapefile:
data_coast <- readOGR(dsn = path.ne.coast,
layer = file_path_sans_ext(file_name))
#Message: A Large SpatialLinesDataFrame object with 4132 features and 2 fields (12.8 Mb)
quick.subset <- function(x, domain){
x@data$id <- rownames(x@data)
x.f = fortify(x, region = "id")
x.join <- inner_join(x.f, x@data, by = "id")
x.subset <- subset(x.join, x.join$long > domain[1] &
x.join$long < domain[2] &
x.join$lat > domain[3] &
x.join$lat < domain[4])
x.subset
}
P_Lat_N <-73 #Pacific_Latitude_North
P_Lat_S <- 30 #Pacific_Latitude_South
P_Long_W <- -179.5 #Pacific_Longitude_West
P_Long_E <- -120.5 #Pacific_Longitude_East
domain <- c(P_Long_W, P_Long_E, P_Lat_S, P_Lat_N)
data_coast.wc <- quick.subset(data_coast, domain) # 4871x8
data_coast.wc
View(data_coast.wc)
xlims <- c(-185, -116)
ylims <- c(32, 73)
Map_Base <- ggplot() +
geom_path(data = data_coast.wc, aes(x = long, y = lat, group = group),
color = "black",
size = 0.25)
Map_Base
ggplot() +
geom_path(data = data_coast.wc, aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator")
ggplot() +
geom_path(data = data_coast.wc, aes(x = long, y = lat, group = group),
color = "black",
size = 0.25)
ggplot() +
geom_path(data = data_coast.wc, aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator")
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator")
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator") + #Try plotting the map without this!
scale_x_continuous(limits = xlims,
expand = c(0, 0))
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator") + #Try plotting the map without this!
scale_x_continuous(limits = xlims,
expand = c(0, 0)) +
scale_y_continuous(limits = ylims,
expand = c(0, 0))
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator") + #Try plotting the map without this!
scale_x_continuous(limits = xlims,
expand = c(0, 0)) +
scale_y_continuous(limits = ylims,
expand = c(0, 0)) +
labs(list(title = "",
x = "Longitude",
y = "Latitude")) +
theme_classic()
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator") + #Try plotting the map without this!
scale_x_continuous(limits = xlims,
expand = c(0, 0)) +
scale_y_continuous(limits = ylims,
expand = c(0, 0)) +
labs(list(title = "",
x = "Longitude",
y = "Latitude")) +
theme_dark() #I'm OCD and don0t like lines and background on my plots
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator") + #Try plotting the map without this!
scale_x_continuous(limits = xlims,
expand = c(0, 0)) +
scale_y_continuous(limits = ylims,
expand = c(0, 0)) +
labs(list(title = "Pacific North West Map",
x = "Longitude",
y = "Latitude")) +
theme_classic() #I'm OCD and don0t like lines and background on my plots
path_eez_world <- ("Data/World_EEZ_v8_2014")
fnam_eez_world <- "World_EEZ_v8_2014_HR.shp"
eez_world <- readOGR(dsn = path_eez_world,
layer =file_path_sans_ext(fnam_eez_world))
path_eez_world <- ("Data/World_EEZ_v8_2014")
fnam_eez_world <- "World_EEZ_v8_2014_HR.shp"
eez_world <- readOGR(dsn = path_eez_world,
layer =file_path_sans_ext(fnam_eez_world))
path_eez_world <- ("Data/World_EEZ_v9_20161021")
eez_world <- readOGR(dsn = path_eez_world,
layer =file_path_sans_ext(fnam_eez_world))
path_eez_world <- ("Data/World_EEZ_v9_20161021")
fnam_eez_world <- "World_EEZ_v8_2014_HR.shp"
eez_world <- readOGR(dsn = path_eez_world,
layer =file_path_sans_ext(fnam_eez_world))
path_eez_world <- ("Data/World_EEZ_v8_20140228")
fnam_eez_world <- "World_EEZ_v8_2014_HR.shp"
eez_world <- readOGR(dsn = path_eez_world,
layer =file_path_sans_ext(fnam_eez_world))
fortify.shape <- function(x){
x@data$id <- rownames(x@data)
x.f = fortify(x, region = "id")
x.join <- inner_join(x.f, x@data, by = "id")
}
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
fill="red",
size = 0.25)
ggplot() +
geom_path(data = data_coast.wc,
aes(x = long, y = lat, group = group),
color = "black",
size = 0.25) +
coord_map(projection = "mercator", color="red")
eez_Alaska <- eez_world[eez_world@data$Country == "Alaska", ]
head(eez_world)
